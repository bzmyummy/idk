<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è´ªé£Ÿè›‡æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #111;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 800px;
            width: 100%;
            gap: 20px;
        }
        
        .header {
            text-align: center;
            width: 100%;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }
        
        h1 {
            color: #4CAF50;
            font-size: 2.8rem;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .subtitle {
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
        }
        
        .game-container {
            position: relative;
        }
        
        #game-canvas {
            background-color: #000;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.3);
            border: 2px solid #333;
        }
        
        .game-info {
            background-color: #222;
            border-radius: 8px;
            padding: 20px;
            min-width: 250px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        
        .score-container {
            text-align: center;
            padding: 15px;
            background-color: #333;
            border-radius: 6px;
        }
        
        .score-title {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 8px;
        }
        
        #score {
            font-size: 3rem;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .control-title {
            color: #aaa;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .control-item {
            background-color: #333;
            padding: 12px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
        }
        
        .key {
            background-color: #444;
            color: #fff;
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .game-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 10px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        #restart-btn {
            background-color: #f44336;
        }
        
        #restart-btn:hover {
            background-color: #d32f2f;
        }
        
        #pause-btn {
            background-color: #2196F3;
        }
        
        #pause-btn:hover {
            background-color: #0b7dda;
        }
        
        .instructions {
            background-color: #222;
            border-radius: 8px;
            padding: 20px;
            margin-top: 10px;
            width: 100%;
        }
        
        .instructions h2 {
            color: #4CAF50;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .instructions p {
            line-height: 1.6;
            margin-bottom: 10px;
            color: #ccc;
        }
        
        .instruction-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .instruction-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .snake-icon {
            background-color: #4CAF50;
        }
        
        .apple-icon {
            background-color: #f44336;
        }
        
        .mobile-controls {
            display: none;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
            width: 200px;
            height: 200px;
        }
        
        .mobile-btn {
            background-color: #333;
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        #up-btn {
            grid-column: 2;
            grid-row: 1;
        }
        
        #left-btn {
            grid-column: 1;
            grid-row: 2;
        }
        
        #right-btn {
            grid-column: 3;
            grid-row: 2;
        }
        
        #down-btn {
            grid-column: 2;
            grid-row: 3;
        }
        
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            display: none;
        }
        
        .game-over h2 {
            font-size: 3rem;
            color: #f44336;
            margin-bottom: 20px;
        }
        
        .game-over p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }
        
        .footer {
            margin-top: 20px;
            color: #666;
            text-align: center;
            font-size: 0.9rem;
            padding: 10px;
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
                align-items: center;
            }
            
            .game-info {
                width: 100%;
                max-width: 500px;
            }
            
            .mobile-controls {
                display: grid;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 480px) {
            #game-canvas {
                width: 95vw;
                height: 95vw;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .game-info {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>è´ªé£Ÿè›‡æ¸¸æˆ</h1>
            <p class="subtitle">æ§åˆ¶è›‡ç§»åŠ¨ï¼Œåƒæ‰çº¢è‰²è‹¹æœå˜é•¿ï¼Œé¿å…æ’å¢™æˆ–æ’åˆ°è‡ªå·±</p>
        </div>
        
        <div class="game-area">
            <div class="game-container">
                <canvas id="game-canvas" width="600" height="600"></canvas>
                <div class="game-over" id="game-over">
                    <h2>æ¸¸æˆç»“æŸ</h2>
                    <p>ä½ çš„å¾—åˆ†: <span id="final-score">0</span></p>
                    <button id="restart-over-btn">é‡æ–°å¼€å§‹</button>
                </div>
            </div>
            
            <div class="game-info">
                <div class="score-container">
                    <div class="score-title">å½“å‰å¾—åˆ†</div>
                    <div id="score">0</div>
                </div>
                
                <div class="controls">
                    <div class="control-title">æ¸¸æˆæ§åˆ¶</div>
                    <div class="control-item">
                        <span>ç§»åŠ¨æ§åˆ¶</span>
                        <div>
                            <span class="key">â†‘</span>
                            <span class="key">â†“</span>
                            <span class="key">â†</span>
                            <span class="key">â†’</span>
                        </div>
                    </div>
                    <div class="control-item">
                        <span>æš‚åœ/ç»§ç»­</span>
                        <span class="key">ç©ºæ ¼</span>
                    </div>
                    <div class="control-item">
                        <span>é‡æ–°å¼€å§‹</span>
                        <span class="key">R</span>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button id="start-btn">å¼€å§‹æ¸¸æˆ</button>
                    <button id="pause-btn">æš‚åœæ¸¸æˆ</button>
                    <button id="restart-btn">é‡æ–°å¼€å§‹</button>
                </div>
                
                <div class="mobile-controls">
                    <button class="mobile-btn" id="up-btn">â†‘</button>
                    <button class="mobile-btn" id="left-btn">â†</button>
                    <button class="mobile-btn" id="right-btn">â†’</button>
                    <button class="mobile-btn" id="down-btn">â†“</button>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h2>æ¸¸æˆè¯´æ˜</h2>
            <div class="instruction-item">
                <div class="instruction-icon snake-icon">ğŸ</div>
                <div>ä½¿ç”¨é”®ç›˜æ–¹å‘é”®æ§åˆ¶è›‡çš„ç§»åŠ¨æ–¹å‘</div>
            </div>
            <div class="instruction-item">
                <div class="instruction-icon apple-icon">ğŸ</div>
                <div>åƒåˆ°çº¢è‰²è‹¹æœå¯ä»¥å¢åŠ è›‡çš„é•¿åº¦å’Œå¾—åˆ†</div>
            </div>
            <p>æ¸¸æˆè§„åˆ™ï¼šè›‡ä¸èƒ½æ’åˆ°å¢™å£æˆ–è‡ªå·±çš„èº«ä½“ï¼Œå¦åˆ™æ¸¸æˆç»“æŸã€‚è›‡ç§»åŠ¨é€Ÿåº¦ä¼šéšç€å¾—åˆ†å¢åŠ è€Œé€æ¸åŠ å¿«ã€‚</p>
        </div>
        
        <div class="footer">
            HTML5è´ªé£Ÿè›‡æ¸¸æˆ | èƒŒæ™¯é»‘è‰² | çº¢è‰²è‹¹æœ | åƒåˆ°è‹¹æœå˜é•¿
        </div>
    </div>

    <script>
        // è·å–Canvaså…ƒç´ å’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        
        // æ¸¸æˆçŠ¶æ€å˜é‡
        let score = 0;
        let gameRunning = false;
        let gamePaused = false;
        let gameLoop;
        let speed = 10; // åˆå§‹é€Ÿåº¦ï¼ˆå¸§/ç§’ï¼‰
        
        // è›‡çš„åˆå§‹è®¾ç½®
        let snake = [
            {x: 10, y: 10},
            {x: 9, y: 10},
            {x: 8, y: 10}
        ];
        
        // é£Ÿç‰©ä½ç½®
        let food = {x: 15, y: 15};
        
        // è›‡çš„ç§»åŠ¨æ–¹å‘
        let dx = 1;
        let dy = 0;
        
        // ä¸Šä¸€ä¸ªç§»åŠ¨æ–¹å‘ï¼ˆç”¨äºé˜²æ­¢è›‡ç›´æ¥åå‘ç§»åŠ¨ï¼‰
        let lastDx = 1;
        let lastDy = 0;
        
        // æ ¼å­å¤§å°å’Œæ•°é‡
        const gridSize = 20;
        const gridWidth = canvas.width / gridSize;
        const gridHeight = canvas.height / gridSize;
        
        // è·å–DOMå…ƒç´ 
        const scoreElement = document.getElementById('score');
        const startBtn = document.getElementById('start-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const restartBtn = document.getElementById('restart-btn');
        const restartOverBtn = document.getElementById('restart-over-btn');
        const gameOverScreen = document.getElementById('game-over');
        const finalScoreElement = document.getElementById('final-score');
        
        // ç§»åŠ¨æ§åˆ¶æŒ‰é’®ï¼ˆç§»åŠ¨ç«¯ï¼‰
        const upBtn = document.getElementById('up-btn');
        const downBtn = document.getElementById('down-btn');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        
        // ç»˜åˆ¶æ¸¸æˆå…ƒç´ 
        function drawGame() {
            // æ¸…ç©ºç”»å¸ƒ
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶è›‡
            snake.forEach((segment, index) => {
                // è›‡å¤´ç”¨ä¸åŒé¢œè‰²
                if (index === 0) {
                    ctx.fillStyle = '#4CAF50'; // è›‡å¤´ç»¿è‰²
                } else {
                    // è›‡èº«ä½“æ¸å˜è‰²
                    const colorValue = 150 - (index % 10) * 5;
                    ctx.fillStyle = `rgb(76, ${colorValue}, 80)`;
                }
                
                // ç»˜åˆ¶åœ†è§’çŸ©å½¢ä½œä¸ºè›‡èº«ä½“
                drawRoundedRect(
                    segment.x * gridSize, 
                    segment.y * gridSize, 
                    gridSize - 1, 
                    gridSize - 1, 
                    4
                );
                
                // è›‡å¤´ç»˜åˆ¶çœ¼ç›
                if (index === 0) {
                    ctx.fillStyle = '#000';
                    // æ ¹æ®æ–¹å‘ç¡®å®šçœ¼ç›ä½ç½®
                    let eye1X, eye1Y, eye2X, eye2Y;
                    
                    if (dx === 1) { // å‘å³
                        eye1X = segment.x * gridSize + gridSize - 6;
                        eye1Y = segment.y * gridSize + 6;
                        eye2X = segment.x * gridSize + gridSize - 6;
                        eye2Y = segment.y * gridSize + gridSize - 6;
                    } else if (dx === -1) { // å‘å·¦
                        eye1X = segment.x * gridSize + 6;
                        eye1Y = segment.y * gridSize + 6;
                        eye2X = segment.x * gridSize + 6;
                        eye2Y = segment.y * gridSize + gridSize - 6;
                    } else if (dy === 1) { // å‘ä¸‹
                        eye1X = segment.x * gridSize + 6;
                        eye1Y = segment.y * gridSize + gridSize - 6;
                        eye2X = segment.x * gridSize + gridSize - 6;
                        eye2Y = segment.y * gridSize + gridSize - 6;
                    } else { // å‘ä¸Š
                        eye1X = segment.x * gridSize + 6;
                        eye1Y = segment.y * gridSize + 6;
                        eye2X = segment.x * gridSize + gridSize - 6;
                        eye2Y = segment.y * gridSize + 6;
                    }
                    
                    ctx.beginPath();
                    ctx.arc(eye1X, eye1Y, 2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(eye2X, eye2Y, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            // ç»˜åˆ¶é£Ÿç‰©ï¼ˆçº¢è‰²è‹¹æœï¼‰
            ctx.fillStyle = '#f44336';
            drawApple(food.x * gridSize + gridSize/2, food.y * gridSize + gridSize/2, gridSize/2 - 2);
            
            // ç»˜åˆ¶åˆ†æ•°
            ctx.fillStyle = '#fff';
            ctx.font = '16px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`å¾—åˆ†: ${score}`, 10, 20);
            
            // å¦‚æœæ¸¸æˆæš‚åœï¼Œæ˜¾ç¤ºæš‚åœæ–‡æœ¬
            if (gamePaused && gameRunning) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 40px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('æ¸¸æˆæš‚åœ', canvas.width/2, canvas.height/2 - 20);
                
                ctx.font = '20px Arial';
                ctx.fillText('æŒ‰ç©ºæ ¼é”®ç»§ç»­', canvas.width/2, canvas.height/2 + 30);
            }
        }
        
        // ç»˜åˆ¶åœ†è§’çŸ©å½¢å‡½æ•°
        function drawRoundedRect(x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
            ctx.fill();
        }
        
        // ç»˜åˆ¶è‹¹æœå‡½æ•°
        function drawApple(x, y, radius) {
            // è‹¹æœä¸»ä½“
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // è‹¹æœèŒ
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(x - 1, y - radius - 3, 2, 5);
            
            // è‹¹æœå¶å­
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.ellipse(x + 3, y - radius - 1, 4, 2, Math.PI/4, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // æ›´æ–°æ¸¸æˆçŠ¶æ€
        function updateGame() {
            if (!gameRunning || gamePaused) return;
            
            // æ›´æ–°è›‡å¤´ä½ç½®
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            
            // æ£€æŸ¥æ˜¯å¦æ’å¢™
            if (head.x < 0 || head.x >= gridWidth || head.y < 0 || head.y >= gridHeight) {
                gameOver();
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ’åˆ°è‡ªå·±
            for (let segment of snake) {
                if (head.x === segment.x && head.y === segment.y) {
                    gameOver();
                    return;
                }
            }
            
            // å°†æ–°çš„å¤´æ·»åŠ åˆ°è›‡èº«
            snake.unshift(head);
            
            // æ£€æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
            if (head.x === food.x && head.y === food.y) {
                // å¢åŠ åˆ†æ•°
                score += 10;
                scoreElement.textContent = score;
                
                // æ¯å¾—50åˆ†å¢åŠ ä¸€æ¬¡é€Ÿåº¦
                if (score % 50 === 0) {
                    speed += 2;
                    clearInterval(gameLoop);
                    gameLoop = setInterval(updateGame, 1000 / speed);
                }
                
                // ç”Ÿæˆæ–°çš„é£Ÿç‰©ä½ç½®
                generateFood();
            } else {
                // å¦‚æœæ²¡æœ‰åƒåˆ°é£Ÿç‰©ï¼Œç§»é™¤è›‡å°¾
                snake.pop();
            }
            
            // æ›´æ–°ä¸Šä¸€ä¸ªç§»åŠ¨æ–¹å‘
            lastDx = dx;
            lastDy = dy;
            
            // é‡ç»˜æ¸¸æˆ
            drawGame();
        }
        
        // ç”Ÿæˆé£Ÿç‰©
        function generateFood() {
            // éšæœºç”Ÿæˆé£Ÿç‰©ä½ç½®
            let newFood;
            let foodOnSnake;
            
            do {
                foodOnSnake = false;
                newFood = {
                    x: Math.floor(Math.random() * gridWidth),
                    y: Math.floor(Math.random() * gridHeight)
                };
                
                // æ£€æŸ¥é£Ÿç‰©æ˜¯å¦å‡ºç°åœ¨è›‡èº«ä¸Š
                for (let segment of snake) {
                    if (segment.x === newFood.x && segment.y === newFood.y) {
                        foodOnSnake = true;
                        break;
                    }
                }
            } while (foodOnSnake);
            
            food = newFood;
        }
        
        // æ¸¸æˆç»“æŸ
        function gameOver() {
            gameRunning = false;
            clearInterval(gameLoop);
            
            // æ˜¾ç¤ºæ¸¸æˆç»“æŸç”»é¢
            finalScoreElement.textContent = score;
            gameOverScreen.style.display = 'flex';
            
            // ç»˜åˆ¶æœ€åä¸€å¸§
            drawGame();
            
            // åœ¨æ¸¸æˆç»“æŸç”»é¢ä¸Šç»˜åˆ¶"æ¸¸æˆç»“æŸ"æ–‡å­—
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#f44336';
            ctx.font = 'bold 50px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('æ¸¸æˆç»“æŸ', canvas.width/2, canvas.height/2 - 40);
            
            ctx.fillStyle = '#fff';
            ctx.font = '30px Arial';
            ctx.fillText(`æœ€ç»ˆå¾—åˆ†: ${score}`, canvas.width/2, canvas.height/2 + 20);
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameRunning) return;
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            resetGame();
            
            gameRunning = true;
            gamePaused = false;
            gameOverScreen.style.display = 'none';
            
            // å¼€å§‹æ¸¸æˆå¾ªç¯
            gameLoop = setInterval(updateGame, 1000 / speed);
            
            // æ›´æ–°æŒ‰é’®æ–‡æœ¬
            startBtn.textContent = 'æ¸¸æˆè¿›è¡Œä¸­';
            startBtn.disabled = true;
            pauseBtn.textContent = 'æš‚åœæ¸¸æˆ';
            
            // ç»˜åˆ¶åˆå§‹æ¸¸æˆçŠ¶æ€
            drawGame();
        }
        
        // æš‚åœ/ç»§ç»­æ¸¸æˆ
        function togglePause() {
            if (!gameRunning) return;
            
            gamePaused = !gamePaused;
            
            if (gamePaused) {
                pauseBtn.textContent = 'ç»§ç»­æ¸¸æˆ';
                clearInterval(gameLoop);
            } else {
                pauseBtn.textContent = 'æš‚åœæ¸¸æˆ';
                gameLoop = setInterval(updateGame, 1000 / speed);
            }
            
            drawGame();
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            clearInterval(gameLoop);
            resetGame();
            startGame();
        }
        
        // é‡ç½®æ¸¸æˆçŠ¶æ€
        function resetGame() {
            // é‡ç½®è›‡
            snake = [
                {x: 10, y: 10},
                {x: 9, y: 10},
                {x: 8, y: 10}
            ];
            
            // é‡ç½®æ–¹å‘
            dx = 1;
            dy = 0;
            lastDx = 1;
            lastDy = 0;
            
            // é‡ç½®åˆ†æ•°å’Œé€Ÿåº¦
            score = 0;
            speed = 10;
            scoreElement.textContent = score;
            
            // ç”Ÿæˆæ–°é£Ÿç‰©
            generateFood();
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            startBtn.textContent = 'å¼€å§‹æ¸¸æˆ';
            startBtn.disabled = false;
            pauseBtn.textContent = 'æš‚åœæ¸¸æˆ';
            
            // éšè—æ¸¸æˆç»“æŸç”»é¢
            gameOverScreen.style.display = 'none';
            
            // ç»˜åˆ¶åˆå§‹çŠ¶æ€
            drawGame();
        }
        
        // é”®ç›˜æ§åˆ¶
        function changeDirection(newDx, newDy) {
            // é˜²æ­¢è›‡ç›´æ¥åå‘ç§»åŠ¨
            if ((newDx !== 0 && newDx === -lastDx) || (newDy !== 0 && newDy === -lastDy)) {
                return;
            }
            
            dx = newDx;
            dy = newDy;
        }
        
        // äº‹ä»¶ç›‘å¬
        document.addEventListener('keydown', (event) => {
            switch(event.key) {
                case 'ArrowUp':
                    event.preventDefault();
                    changeDirection(0, -1);
                    break;
                case 'ArrowDown':
                    event.preventDefault();
                    changeDirection(0, 1);
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    changeDirection(-1, 0);
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    changeDirection(1, 0);
                    break;
                case ' ':
                    event.preventDefault();
                    if (gameRunning) {
                        togglePause();
                    } else {
                        startGame();
                    }
                    break;
                case 'r':
                case 'R':
                    event.preventDefault();
                    restartGame();
                    break;
            }
        });
        
        // æŒ‰é’®äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', startGame);
        pauseBtn.addEventListener('click', togglePause);
        restartBtn.addEventListener('click', restartGame);
        restartOverBtn.addEventListener('click', restartGame);
        
        // ç§»åŠ¨ç«¯æ§åˆ¶æŒ‰é’®äº‹ä»¶
        upBtn.addEventListener('click', () => changeDirection(0, -1));
        downBtn.addEventListener('click', () => changeDirection(0, 1));
        leftBtn.addEventListener('click', () => changeDirection(-1, 0));
        rightBtn.addEventListener('click', () => changeDirection(1, 0));
        
        // è§¦æ‘¸æ§åˆ¶ï¼ˆé˜²æ­¢ç§»åŠ¨ç«¯æ»‘åŠ¨ï¼‰
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });
        
        // åˆå§‹ç»˜åˆ¶
        drawGame();
    </script>
</body>
</html>